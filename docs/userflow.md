## 음식점 리뷰 사이트 기능 단위 유저 플로우 설계

제공된 PRD 및 개발 요구사항 문서를 기반으로 핵심 기능 단위의 유저 플로우를 설계했습니다. 각 플로우는 **입력 (Input)**, **처리 (Processing)**, **출력 (Output)** 단계로 구성되며 엣지 케이스를 포함합니다.

---

### 1. 장소 검색 및 정보 확인 플로우

#### A. 일반적인 검색 및 정보 확인

| 단계 | 입력 (Input) | 처리 (Processing) | 출력 (Output) |
| :--- | :--- | :--- | :--- |
| **1. 검색 시작** | [메인 페이지] 상단 검색 바에 키워드 입력 후 엔터/검색 버튼 클릭 | 1. 네이버 장소 검색 API 호출 및 검색 결과 수신. | [장소 검색 결과 모달] 출력. 검색 결과를 스크롤 가능한 리스트로 표시. |
| **2. 결과 선택** | [장소 검색 결과 모달] 리스트 항목 선택 | 1. 선택된 장소의 좌표 확인. | 1. 지도상 해당 장소의 마커 **강조** 표시. 2. 모달 상태 유지. |
| **3. 상세 진입** | [장소 검색 결과 모달] "장소 세부 정보" 버튼 클릭 | 1. 선택된 장소의 고유 ID(Place ID) 기반으로 Supabase에서 리뷰 데이터 조회. 2. 평균 별점 및 총 리뷰 개수 계산. | [장소 세부 정보 모달] 출력. 업체 기본 정보, 리뷰 요약, 리뷰 목록 표시. |
| **4. 정보 확인** | [장소 세부 정보 모달] 정보 확인 후 닫기 요청 (Back Navigation 버튼 또는 외부 클릭) | 1. 모달 닫기 로직 실행. 2. 직전 상태 확인 (검색 결과 모달). | [장소 검색 결과 모달] 복귀. |

#### B. 엣지 케이스: 검색 결과 없음

| 단계 | 입력 (Input) | 처리 (Processing) | 출력 (Output) |
| :--- | :--- | :--- | :--- |
| **검색 결과 없음** | [메인 페이지] 상단 검색 바에 존재하지 않는 키워드 입력 후 검색 | 1. 네이버 장소 검색 API 호출 결과, 데이터가 0건으로 수신됨. | [장소 검색 결과 모달] 출력. '검색 결과가 없습니다' 등의 안내 문구 표시. |

---

### 2. 지도 마커를 통한 정보 확인 플로우

| 단계 | 입력 (Input) | 처리 (Processing) | 출력 (Output) |
| :--- | :--- | :--- | :--- |
| **1. 마커 클릭** | [메인 페이지] 지도 위의 **커스텀 마커** 클릭 | 1. 해당 마커와 연결된 장소의 고유 ID 확인. 2. Supabase에서 리뷰 데이터 조회. 3. 평균 별점 및 총 리뷰 개수 계산. | [장소 세부 정보 모달] 출력. 업체 기본 정보, 리뷰 요약, 리뷰 목록 표시. |
| **2. 모달 닫기** | [장소 세부 정보 모달] 닫기 요청 (외부 클릭 또는 Back Navigation) | 1. 모달 닫기 로직 실행. 2. 직전 상태 확인 (메인 지도). | [메인 페이지] 복귀. 지도 화면 표시. |

---

### 3. 리뷰 작성 플로우

#### A. 일반적인 리뷰 작성

| 단계 | 입력 (Input) | 처리 (Processing) | 출력 (Output) |
| :--- | :--- | :--- | :--- |
| **1. 작성 진입** | [장소 세부 정보 모달] "리뷰 작성하기" 버튼 클릭 | 1. 해당 업체의 기본 정보를 Review Write 모달에 전달. | [리뷰 작성 모달] 출력. 상단에 업체 정보 표시. |
| **2. 폼 입력** | [리뷰 작성 모달] 입력 폼에 모든 필수 항목 입력 완료: 1. 작성자명. 2. 별점 (1~5점). 3. 리뷰 내용 (최대 500자 이내). 4. 비밀번호 (4자리 숫자). | *(시스템 대기)* | *(출력 없음)* |
| **3. 저장 요청** | [리뷰 작성 모달] "리뷰 작성하기" 버튼 클릭 | 1. 입력된 모든 필수 항목에 대한 **유효성 검사** 실행. 2. (유효성 통과 시) 리뷰 데이터를 Supabase에 저장 (비밀번호 암호화 권장). | 1. [리뷰 작성 모달] 닫기. 2. [장소 세부 정보 모달] 복귀. 3. Supabase 데이터 재조회 후 **업데이트된** 리뷰 목록 및 평균 별점 표시. |

#### B. 엣지 케이스: 유효성 검사 실패

| 단계 | 입력 (Input) | 처리 (Processing) | 출력 (Output) |
| :--- | :--- | :--- | :--- |
| **필수 항목 누락** | [리뷰 작성 모달] 필수 항목 중 일부 (작성자명, 별점, 내용, 비밀번호)를 누락하거나, 내용이 500자를 초과하거나, 비밀번호가 4자리 숫자가 아닌 상태로 "리뷰 작성하기" 버튼 클릭 | 1. 입력된 데이터에 대해 유효성 검사 실행. 2. 검사 결과 실패. | [리뷰 작성 모달] **유효성 검사 실패 안내** 메시지 표시 (예: "별점을 선택해주세요" 또는 "비밀번호는 4자리 숫자여야 합니다"). 모달 상태 유지. |